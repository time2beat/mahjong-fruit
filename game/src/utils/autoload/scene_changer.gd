extends Node
# docstring 文档说明


################################################################
# Signals 信号
################################################################

################################################################
# Enums 枚举
################################################################

################################################################
# Constants 常量
################################################################

################################################################
# Exported variables 导出变量
################################################################

################################################################
# Public variables 公共变量
################################################################

################################################################
# Private variables 私有变量
################################################################
var _current_scene = null

################################################################
# Onready variables 自动初始化变量
################################################################


################################################################
# built-in virtual methods 内置的虚函数
################################################################
#func _init():
#	pass


func _ready():
	var root = get_tree().get_root()
	_current_scene = root.get_child(root.get_child_count() - 1)


#func _process(delta):
#	pass


################################################################
# Public methods 公共函数
################################################################
func goto_scene(path):
	call_deferred("_deferred_goto_scene", path)


################################################################
# Private methods 私有函数
################################################################
func _deferred_goto_scene(scene):
	_current_scene.free()
	if typeof(scene) in [TYPE_NODE_PATH, TYPE_STRING]:
		_current_scene = ResourceLoader.load(scene).instance()
	elif typeof(scene) == TYPE_OBJECT:
		_current_scene = scene.instance()
	get_tree().get_root().add_child(_current_scene)
	get_tree().set_current_scene(_current_scene)  # 兼容 SceneTree.change_scene()


################################################################
# Setter/Getter methods
################################################################


################################################################
# Callback methods 回调函数
################################################################
